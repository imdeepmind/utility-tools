import{r as y,j as d}from"./index-4JYQSPrg.js";import{C as b}from"./CodeEditor-CDoHuMT7.js";import{S as T}from"./SEO-m2NIg61p.js";class M{diff(e,n,t={}){let i;typeof t=="function"?(i=t,t={}):"callback"in t&&(i=t.callback);const c=this.castInput(e,t),l=this.castInput(n,t),u=this.removeEmpty(this.tokenize(c,t)),r=this.removeEmpty(this.tokenize(l,t));return this.diffWithOptionsObj(u,r,t,i)}diffWithOptionsObj(e,n,t,i){var c;const l=o=>{if(o=this.postProcess(o,t),i){setTimeout(function(){i(o)},0);return}else return o},u=n.length,r=e.length;let a=1,s=u+r;t.maxEditLength!=null&&(s=Math.min(s,t.maxEditLength));const j=(c=t.timeout)!==null&&c!==void 0?c:1/0,f=Date.now()+j,m=[{oldPos:-1,lastComponent:void 0}];let g=this.extractCommon(m[0],n,e,0,t);if(m[0].oldPos+1>=r&&g+1>=u)return l(this.buildValues(m[0].lastComponent,n,e));let v=-1/0,P=1/0;const w=()=>{for(let o=Math.max(v,-a);o<=Math.min(P,a);o+=2){let p;const h=m[o-1],x=m[o+1];h&&(m[o-1]=void 0);let C=!1;if(x){const N=x.oldPos-o;C=x&&0<=N&&N<u}const D=h&&h.oldPos+1<r;if(!C&&!D){m[o]=void 0;continue}if(!D||C&&h.oldPos<x.oldPos?p=this.addToPath(x,!0,!1,0,t):p=this.addToPath(h,!1,!0,1,t),g=this.extractCommon(p,n,e,o,t),p.oldPos+1>=r&&g+1>=u)return l(this.buildValues(p.lastComponent,n,e))||!0;m[o]=p,p.oldPos+1>=r&&(P=Math.min(P,o-1)),g+1>=u&&(v=Math.max(v,o+1))}a++};if(i)(function o(){setTimeout(function(){if(a>s||Date.now()>f)return i(void 0);w()||o()},0)})();else for(;a<=s&&Date.now()<=f;){const o=w();if(o)return o}}addToPath(e,n,t,i,c){const l=e.lastComponent;return l&&!c.oneChangePerToken&&l.added===n&&l.removed===t?{oldPos:e.oldPos+i,lastComponent:{count:l.count+1,added:n,removed:t,previousComponent:l.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:t,previousComponent:l}}}extractCommon(e,n,t,i,c){const l=n.length,u=t.length;let r=e.oldPos,a=r-i,s=0;for(;a+1<l&&r+1<u&&this.equals(t[r+1],n[a+1],c);)a++,r++,s++,c.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return s&&!c.oneChangePerToken&&(e.lastComponent={count:s,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=r,a}equals(e,n,t){return t.comparator?t.comparator(e,n):e===n||!!t.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,t){const i=[];let c;for(;e;)i.push(e),c=e.previousComponent,delete e.previousComponent,e=c;i.reverse();const l=i.length;let u=0,r=0,a=0;for(;u<l;u++){const s=i[u];if(s.removed)s.value=this.join(t.slice(a,a+s.count)),a+=s.count;else{if(!s.added&&this.useLongestToken){let j=n.slice(r,r+s.count);j=j.map(function(f,m){const g=t[a+m];return g.length>f.length?g:f}),s.value=this.join(j)}else s.value=this.join(n.slice(r,r+s.count));r+=s.count,s.added||(a+=s.count)}}return i}}class R extends M{}const O=new R;function I(L,e,n){return O.diff(L,e,n)}const W=()=>{const[L,e]=y.useState(""),[n,t]=y.useState(""),i=y.useRef(null),c=y.useRef(null),l=y.useRef(null),u=(f,m)=>{i.current=f,l.current=m},r=f=>{c.current=f},a=y.useRef([]),s=y.useRef([]),j=()=>{if(!i.current||!c.current||!l.current)return;const f=I(L,n),m=[],g=[];let v=1,P=1,w=1,o=1;const p=(h,x,C)=>{let D=h,N=x;for(const E of C)E===`
`?(D++,N=1):N++;return{line:D,col:N}};f.forEach(h=>{const x=h.added?{line:v,col:P}:p(v,P,h.value),C=h.removed?{line:w,col:o}:p(w,o,h.value);h.removed?m.push({range:new l.current.Range(v,P,x.line,x.col),options:{className:"diff-remove",isWholeLine:!1,linesDecorationsClassName:"diff-gutter-remove"}}):h.added&&g.push({range:new l.current.Range(w,o,C.line,C.col),options:{className:"diff-add",isWholeLine:!1,linesDecorationsClassName:"diff-gutter-add"}}),v=x.line,P=x.col,w=C.line,o=C.col}),a.current=i.current.deltaDecorations(a.current,m),s.current=c.current.deltaDecorations(s.current,g)};return d.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[d.jsx(T,{title:"Text Comparison Tool",description:"Compare two texts and highlight the differences."}),d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"Text Comparison Tool"}),d.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Paste text in both boxes and click the button to find differences."})]}),d.jsx("div",{className:"flex justify-center",children:d.jsx("button",{onClick:j,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-[#e0223e] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:"Find Difference"})}),d.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-stretch",children:[d.jsxs("div",{className:"flex-1 flex flex-col space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Original Text"}),d.jsx("div",{className:"flex-1",children:d.jsx(b,{value:L,onChange:f=>e(f||""),language:"text",height:"600px",onMount:u})})]}),d.jsxs("div",{className:"flex-1 flex flex-col space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Modified Text"}),d.jsx("div",{className:"flex-1",children:d.jsx(b,{value:n,onChange:f=>t(f||""),language:"text",height:"600px",onMount:r})})]})]})]})};export{W as default};
